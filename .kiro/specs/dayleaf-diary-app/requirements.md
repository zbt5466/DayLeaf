# Requirements Document

## Introduction

DayLeaf（デイリーフ）は、1日1回「しおり」を残すコンセプトのモバイル日記アプリです。写真と短文で気軽に思い出を記録し、アルバムのように積み重ねて振り返ることができます。「Leaf」は葉っぱと紙（ページ）のダブルミーニングで、ほのぼのとした雰囲気で継続しやすい日記体験を提供します。AndroidとiOSの両プラットフォームで利用可能です。

## Requirements

### Requirement 1

**User Story:** ユーザーとして、1日1回写真と短文で日記を投稿したい。そうすることで、気軽に思い出を記録できる。

#### Acceptance Criteria

1. WHEN ユーザーが新規投稿画面を開く THEN システムは写真アップロード、気分選択、天気選択、良かったこと、悪かったこと、ひとくちメモの入力フィールドを表示する
2. WHEN ユーザーが写真をアップロードする THEN システムは写真を正方形にトリミングして表示する
3. WHEN ユーザーが当日中に投稿する THEN システムは投稿を保存し、その日の記録として登録する
4. WHEN ユーザーが既に投稿済みの日に再度投稿しようとする THEN システムは編集モードで既存の投稿を表示する

### Requirement 2

**User Story:** ユーザーとして、過去の日記をタイムライン形式やカレンダー形式で閲覧したい。そうすることで、思い出を振り返ることができる。

#### Acceptance Criteria

1. WHEN ユーザーが一覧画面を開く THEN システムはタイムライン形式で投稿を新しい順に表示する
2. WHEN ユーザーがカレンダー表示に切り替える THEN システムはカレンダー形式で各日付にサムネイル画像を表示する
3. WHEN ユーザーが投稿をタップする THEN システムは詳細画面を「扉絵」デザインで表示する
4. WHEN ユーザーが詳細画面でスワイプする THEN システムは前日または翌日の投稿に移動する

### Requirement 3

**User Story:** ユーザーとして、「1年前の今日」などの特定の日にジャンプしたい。そうすることで、過去の同じ時期の思い出を振り返ることができる。

#### Acceptance Criteria

1. WHEN ユーザーがしおり機能を使用する THEN システムは「1年前の今日」「1ヶ月前の今日」などのオプションを表示する
2. WHEN ユーザーが特定の期間を選択する THEN システムはその日の投稿があれば詳細画面に移動する
3. IF 選択した日に投稿がない THEN システムは「この日の記録はありません」メッセージを表示する

### Requirement 4

**User Story:** ユーザーとして、投稿を編集・削除したい。そうすることで、記録内容を修正できる。

#### Acceptance Criteria

1. WHEN ユーザーが詳細画面で「…」メニューをタップする THEN システムは編集・削除オプションを表示する
2. WHEN ユーザーが編集を選択する THEN システムは編集画面を表示し、既存の内容を入力フィールドに表示する
3. WHEN ユーザーが削除を選択する THEN システムは確認ダイアログを表示し、確認後に投稿を削除する
4. WHEN ユーザーが編集内容を保存する THEN システムは更新された内容で投稿を保存する

### Requirement 5

**User Story:** ユーザーとして、1日1回のリマインド通知を受け取りたい。そうすることで、日記を書く習慣を継続できる。

#### Acceptance Criteria

1. WHEN ユーザーが設定した時間になる THEN システムは日記投稿のリマインド通知を送信する
2. IF ユーザーが既にその日に投稿済み THEN システムは通知を送信しない
3. WHEN ユーザーが通知をタップする THEN システムは新規投稿画面を直接開く
4. WHEN ユーザーが通知時間を変更する THEN システムは新しい時間でリマインドを設定する

### Requirement 6

**User Story:** ユーザーとして、アプリの外観や設定をカスタマイズしたい。そうすることで、自分好みの使いやすい環境にできる。

#### Acceptance Criteria

1. WHEN ユーザーが設定画面を開く THEN システムはテーマ切替、通知時間設定、アプリロック設定のオプションを表示する
2. WHEN ユーザーがテーマを変更する THEN システムはライト/ダーク/季節カラーテーマを適用する
3. WHEN 季節が変わる THEN システムは自動的に季節に応じた背景色を適用する（春=薄ピンク、夏=淡緑、秋=紅葉色、冬=淡青）
4. WHEN ユーザーがアプリロックを有効にする THEN システムはPINまたは生体認証でアプリへのアクセスを制限する

### Requirement 7

**User Story:** ユーザーとして、データの安全性とプライバシーを確保したい。そうすることで、安心して個人的な日記を記録できる。

#### Acceptance Criteria

1. WHEN ユーザーがアプリを初回起動する THEN システムはデータがローカルに保存されることを説明する
2. WHEN 支援プランユーザーがデータバックアップを設定する THEN システムはクラウドストレージ（iCloud/Google Drive）への自動バックアップを有効にする
3. WHEN ユーザーがデータエクスポートを実行する THEN システムはJSON形式または画像付きPDF形式でデータを出力する
4. IF アプリがクラッシュまたは予期しない終了をする THEN システムは次回起動時に未保存データの復旧を試行する

### Requirement 8

**User Story:** ユーザーとして、アプリの動作が軽快で使いやすいインターフェースを使いたい。そうすることで、ストレスなく日記を続けられる。

#### Acceptance Criteria

1. WHEN ユーザーがアプリを起動する THEN システムは3秒以内にメイン画面を表示する
2. WHEN ユーザーが画像をアップロードする THEN システムは5秒以内に処理を完了し、プレビューを表示する
3. WHEN ユーザーが一覧画面をスクロールする THEN システムは滑らかなスクロール体験を提供し、画像の遅延読み込みを行う
4. WHEN ユーザーがオフライン状態で操作する THEN システムは基本機能（閲覧、新規投稿、編集）を継続して提供する

### Requirement 9

**User Story:** ユーザーとして、無料版と支援プランを選択したい。そうすることで、自分の使用スタイルに合った体験ができる。

#### Acceptance Criteria

1. WHEN 無料版ユーザーがアプリを使用する THEN システムは適切な場所に広告を表示する
2. WHEN ユーザーが支援プラン（DayLeaf Supporter）に加入する THEN システムは広告を非表示にし、季節限定テーマ、「1年前の今日」自動通知機能、クラウドバックアップ機能を有効にする
3. WHEN 支援プランユーザーがアプリを使用する THEN システムは応援バッジを表示する
4. WHEN ユーザーが支援プランの機能にアクセスする THEN システムは追加機能を提供する

### Requirement 10

**User Story:** ユーザーとして、AndroidとiOSの両方のプラットフォームで同じ体験を得たい。そうすることで、デバイスを問わず一貫した日記体験ができる。

#### Acceptance Criteria

1. WHEN ユーザーがAndroidデバイスでアプリを使用する THEN システムはAndroid 8.0以上で動作し、Material Designガイドラインに準拠したUIを提供する
2. WHEN ユーザーがiOSデバイスでアプリを使用する THEN システムはiOS 13.0以上で動作し、Human Interface Guidelinesに準拠したUIを提供する
3. WHEN ユーザーがプラットフォーム固有の機能を使用する THEN システムは各OSのネイティブ機能（通知、ファイル管理、生体認証など）を適切に統合する
4. WHEN ユーザーがプラットフォーム固有の機能を使用する THEN システムは各OSの標準的なデータ保存場所（Android: Internal Storage、iOS: Documents Directory）にデータを保存する